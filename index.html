<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Insider - Accueil</title>
    <style>
        :root { --f1-red: #e10600; --live-green: #00d26a; --dark-bg: #15151e; --card-bg: #1f1f2b; --text-main: #ffffff; --text-sec: #aeb5bc; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: var(--dark-bg); color: var(--text-main); }
        
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 50px; background: rgba(21, 21, 30, 0.95); border-bottom: 1px solid #333; }
        .logo { font-size: 24px; font-weight: 900; letter-spacing: 1px; } .logo span { color: var(--f1-red); }
        
        .hero { text-align: center; padding: 100px 20px; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://media.formula1.com/image/upload/f_auto,c_limit,w_1920,q_auto/fom-website/2024/GettyImages-2149587983'); background-size: cover; background-position: center; }
        .hero h1 { font-size: 3.5em; margin: 0 0 20px 0; text-transform: uppercase; font-style: italic; }
        .btn-main { background-color: var(--f1-red); color: white; padding: 15px 40px; text-decoration: none; font-weight: bold; border-radius: 5px; font-size: 18px; display: inline-block; transition: 0.2s; }
        .btn-main:hover { transform: scale(1.05); background-color: #c40500; }

        /* BANNI√àRE PRINCIPALE */
        .next-race-banner { 
            background: var(--card-bg); margin: -50px auto 50px auto; width: 80%; max-width: 800px; padding: 30px; 
            border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.6); position: relative; 
            border-top: 4px solid #888; text-align: center; transition: 0.5s;
        }
        
        /* STYLE SP√âCIAL "LIVE" */
        .next-race-banner.live-mode {
            border-top: 4px solid var(--f1-red);
            box-shadow: 0 0 30px rgba(225, 6, 0, 0.4);
            animation: pulse-border 2s infinite;
        }
        
        .status-label { font-weight: bold; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; color: #aaa; }
        .live-mode .status-label { color: var(--f1-red); animation: blink 1.5s infinite; }

        .race-name { font-size: 2.2em; font-weight: 800; margin-bottom: 5px; }
        .race-location { color: var(--text-sec); font-size: 1.2em; margin-bottom: 15px; font-style: italic; }
        .race-date { background: rgba(255,255,255,0.1); padding: 10px 20px; border-radius: 20px; display: inline-block; font-weight: bold; color: white; }
        
        .live-mode .race-date { background: var(--f1-red); }

        /* CARTES */
        .features { display: flex; justify-content: center; gap: 30px; padding: 50px 20px; flex-wrap: wrap; }
        .card { background: var(--card-bg); padding: 30px; border-radius: 10px; width: 300px; text-align: center; border: 1px solid #333; transition: 0.3s; }
        .card:hover { border-color: var(--f1-red); transform: translateY(-5px); }
        .btn-small { border: 2px solid white; color: white; padding: 10px 20px; text-decoration: none; border-radius: 20px; font-size: 14px; display: inline-block; margin-top: 15px; transition: 0.3s; }
        .btn-small:hover { background: white; color: var(--dark-bg); }

        /* ANIMATIONS */
        @keyframes pulse-border { 0% { border-color: var(--f1-red); } 50% { border-color: #ff4444; } 100% { border-color: var(--f1-red); } }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <nav>
        <div class="logo">F1 <span>INSIDER</span></div>
        <div style="color: #666;">Saison 2025</div>
    </nav>

    <div class="hero">
        <h1>Saison 2025</h1>
        <p>Suivez la saison en direct : temps au tour, t√©l√©m√©trie et traceurs GPS.</p>
        <a href="calendrier.html" class="btn-main">Voir le Calendrier</a>
    </div>

    <div id="banner" class="next-race-banner">
        <div id="status-label" class="status-label">Prochaine S√©ance</div>
        <div id="race-name" class="race-name">Chargement...</div>
        <div id="race-location" class="race-location">---</div>
        <div id="race-date" class="race-date">--/--/----</div>
        
        <div id="live-btn-container" style="display:none; margin-top:20px;">
            <a href="tracker.html" class="btn-main" style="font-size:14px; padding:10px 20px;">Ouvrir le Tracker Live</a>
        </div>
    </div>

    <section class="features">
        <div class="card"><h3>‚è±Ô∏è Chronos</h3><p>Analyse des temps.</p><a href="tours.html" class="btn-small">Voir</a></div>
        <div class="card"><h3>üìç Tracker GPS</h3><p>Position des voitures.</p><a href="tracker.html" class="btn-small">Voir</a></div>
        <div class="card"><h3>üìÖ Calendrier</h3><p>Programme complet.</p><a href="calendrier.html" class="btn-small">Voir</a></div>
        <div class="card"><h3>ÔøΩ drivers</h3><p>Infos pilotes.</p><a href="pilotes.html" class="btn-small">Voir</a></div>
        <div class="card"><h3>üèéÔ∏è √âquipes</h3><p>Infos √©quipes.</p><a href="equipes.html" class="btn-small">Voir</a></div>
        <div class="card"><h3>üåê Statistiques</h3><p>Donn√©es et records.</p><a href="stats.html" class="btn-small">Voir</a></div>
        <div class="card"><h3>Watch Live</h3><p>Live</p><a href="https://www.yacine-tv.com/yacine-4/" class="btn-small">Voir</a></div>
    </section>

    <script src="f1data.js"></script>
    <script>
        function mettreAJourBanniere() {
            const container = document.getElementById('banner');
            const label = document.getElementById('status-label');
            const liveBtn = document.getElementById('live-btn-container');
            
            // --- SIMULATION ---
            // Pour tester l'effet LIVE, d√©commentez la ligne ci-dessous (C'est l'heure de Las Vegas FP1)
            //const maintenant = new Date("2025-11-21T01:00:00+00:00"); 
            const maintenant = new Date();

            // 1. Chercher une session EN COURS (Start <= Maintenant <= End)
            const sessionEnCours = f1Data.find(s => {
                const start = new Date(s.date_start);
                const end = new Date(s.date_end);
                return maintenant >= start && maintenant <= end;
                
            });

            // 2. Chercher la PROCHAINE session (Start > Maintenant)
            // (On trie par date pour √™tre s√ªr de prendre la plus proche)
            const prochaineSession = f1Data
                .filter(s => new Date(s.date_start) > maintenant)
                .sort((a, b) => new Date(a.date_start) - new Date(b.date_start))[0];

            if (sessionEnCours) {
                // --- CAS 1 : C'EST EN DIRECT ! ---
                container.classList.add('live-mode'); // Active le rouge et l'animation
                label.innerHTML = "üî¥ S√âANCE EN COURS";
                
                document.getElementById('race-name').innerText = `GP ${sessionEnCours.country_name}`;
                document.getElementById('race-location').innerText = `${sessionEnCours.circuit_short_name} - ${sessionEnCours.session_name}`;
                document.getElementById('race-date').innerText = "Regarder maintenant";
                
                // Afficher le bouton vers le tracker
                liveBtn.style.display = "block";

            } else if (prochaineSession) {
                // --- CAS 2 : C'EST BIENT√îT ---
                container.classList.remove('live-mode');
                label.innerHTML = "√Ä VENIR";
                liveBtn.style.display = "none";

                document.getElementById('race-name').innerText = `GP ${prochaineSession.country_name}`;
                document.getElementById('race-location').innerText = `${prochaineSession.circuit_short_name} - ${prochaineSession.session_name}`;
                
                const dateObj = new Date(prochaineSession.date_start );
                const options = { weekday: 'long', day: 'numeric', hour: '2-digit', minute:'2-digit', timeZone: 'Europe/Paris' };
                document.getElementById('race-date').innerText = dateObj.toLocaleDateString('fr-FR', options);
            } else {
                // Fin de saison
                container.classList.remove('live-mode');
                document.getElementById('race-name').innerText = "Saison Termin√©e";
            }
        }

        // Lancer la v√©rification
        mettreAJourBanniere();
        
        // V√©rifier chaque minute si √ßa change
        setInterval(mettreAJourBanniere, 60000);
    </script>
</body>
</html>